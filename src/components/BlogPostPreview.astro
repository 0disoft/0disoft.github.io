---
// src/components/BlogPostPreview.astro
//
// @file BlogPostPreview 컴포넌트
// @description 블로그 포스트의 미리보기 카드 컴포넌트.
//              홈페이지나 아카이브 페이지에서 사용되어 포스트 목록을 표시합니다.
// @version 1.0.0

// 날짜 포맷팅 유틸리티 함수를 가져옵니다.
import { formatDate } from "@/utils/date";

// Astro 콘텐츠 컬렉션의 타입을 가져와 타입 안전성을 확보합니다.
// 'blog' 컬렉션에 정의된 데이터 구조를 사용하도록 강제합니다.
import type { CollectionEntry } from "astro:content";

/**
 * @interface Props
 * @description BlogPostPreview 컴포넌트의 props 인터페이스.
 * @property {CollectionEntry<"blog">} post - 표시할 블로그 포스트 객체.
 * Astro 콘텐츠 컬렉션 'blog'의 엔트리 타입입니다.
 */
interface Props {
  post: CollectionEntry<"blog">;
}

// 부모 컴포넌트로부터 전달받은 post 객체를 구조 분해 할당합니다.
const { post } = Astro.props;
---

<a
  href={`/blog/${post.slug}/`}
  class="group block h-full border-2 border-border rounded-2xl no-underline transition-all hover:(border-accent dark:border-dark-accent)"
>
  <img
    src={post.data.heroImage || "/images/posts/image-placeholder.webp"}
    alt={post.data.heroImageAlt || `Image for ${post.data.title}`}
    class="w-full h-48 object-cover rounded-t-2xl"
  />
  <div class="p-6">
    <h2
      class="font-serif mb-2 group-hover:text-accent dark:group-hover:text-dark-accent transition-colors"
    >
      {post.data.title}
    </h2>
    <p
      class="text-secondary dark:text-dark-secondary mb-4 leading-relaxed line-clamp-3"
    >
      {post.data.description}
    </p>
    <div class="flex flex-wrap gap-2 mb-4">
      {
        post.data.tags.map((tag) => (
          <span class="text-xs bg-elementHoverBg dark:bg-dark-elementHoverBg rounded-full px-3 py-1 text-secondary dark:text-dark-secondary">
            {tag}
          </span>
        ))
      }
    </div>
    <time
      datetime={post.data.pubDate.toISOString()}
      class="text-sm text-secondary dark:text-dark-secondary"
    >
      {formatDate(post.data.pubDate)}
    </time>
  </div>
</a>
